<html><head><title>Ship-hold | Insert Builder</title><base href="/ship-hold/dist/doc/"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="stylesheet" type="text/css" href="resources/theme.css"/><link rel="stylesheet" type="text/css" href="resources/darkula.css"/><link rel="icon" href="resources/ship-hold-logo.svg"/></head><body><header><div id="logo-wrapper"><img alt="ship-hold logo" src="resources/ship-hold-logo.svg"/><div><span>SHIP</span><span>-</span><span>HOLD</span></div></div><div id="main-navigation-container"><nav><ul><li class="top"><a href="./"><span>Introduction</span></a><ul><li><a href="./#getting-started"><span>Getting started</span></a><ul><li class="leaf"><a href="./#installation"><span>Installation</span></a></li><li class="leaf"><a href="./#initialisation"><span>Initialisation</span></a></li></ul></li><li><a href="./#how-to-read"><span>How to read this documentation</span></a></li></ul></li><li class="top"><a href="builders"><span>Builders</span></a><ul><li><a href="builders#build"><span>.build()</span></a><ul><li class="leaf"><a href="builders#parameterized-query"><span>Parameterized queries</span></a></li></ul></li><li><a href="builders#clone"><span>.clone()</span></a></li><li><a href="builders#with"><span>.with(as, build)</span></a></li><li><a href="builders#common-types"><span>Common types</span></a><ul><li class="leaf"><a href="builders#pointers"><span>Pointers</span></a></li><li class="leaf"><a href="builders#values"><span>Values</span></a></li></ul></li></ul></li><li class="top"><a href="builders/insert"><span>INSERT builder</span></a><ul><li><a href="builders/insert#insert"><span>.insert(map,...othersProps)</span></a></li><li><a href="builders/insert#into"><span>.into(tableName)</span></a></li><li><a href="builders/insert#values"><span>.values(rows)</span></a></li><li><a href="builders/insert#returning"><span>.returning(...properties)</span></a></li></ul></li><li class="top"><a href="builders/update"><span>UPDATE builder</span></a><ul><li><a href="builders/update#update"><span>.update(tableName)</span></a></li><li><a href="builders/update#set"><span>.set(mapOrString, ?value)</span></a></li><li><a href="builders/update#from"><span>.from(...pointers)</span></a></li><li><a href="builders/update#where"><span>.where(leftOperand, operator, rightOperand)</span></a></li><li><a href="builders/update#returning"><span>.returning(...properties)</span></a></li></ul></li><li class="top"><a href="builders/delete"><span>DELETE builder</span></a><ul><li><a href="builders/delete#delete"><span>.delete(tableName)</span></a></li><li><a href="builders/delete#using"><span>.using(...pointers)</span></a></li><li><a href="builders/delete#where"><span>.where(leftOperand, operator, rightOperand)</span></a></li><li><a href="builders/delete#returning"><span>.returning(...properties)</span></a></li></ul></li><li class="top"><a href="builders/select"><span>SELECT builder</span></a><ul><li><a href="builders/select#select"><span>.select(...pointers)</span></a></li><li><a href="builders/select#from"><span>.from(...pointers)</span></a></li><li><a href="builders/select#joins"><span>Joins</span></a><ul><li class="leaf"><a href="builders/select#join"><span>.join(table, leftOp, rightOp)</span></a></li><li class="leaf"><a href="builders/select#left-join"><span>.leftJoin(table, leftOp, rightOp)</span></a></li><li class="leaf"><a href="builders/select#right-join"><span>rightJoin(table, leftOp, rightOp)</span></a></li><li class="leaf"><a href="builders/select#on"><span>.on(leftOperand, operator, rightOperand)</span></a></li></ul></li><li><a href="builders/select#group"><span>Group</span></a><ul><li class="leaf"><a href="builders/select#group-by"><span>.groupBy(...columns)</span></a></li><li class="leaf"><a href="builders/select#having"><span>.having(leftOp, operator, rightOp)</span></a></li></ul></li><li><a href="builders/select#where"><span>.where(leftOp, operator, rightOp)</span></a></li><li><a href="builders/select#pagination"><span>Pagination</span></a><ul><li class="leaf"><a href="builders/select#limit"><span>.limit(size, offset)</span></a></li></ul></li></ul></li><li class="top"><a href="builders/conditions"><span>Conditions builder</span></a><ul><li><a href="builders/conditions#factories"><span>Factories</span></a></li></ul></li><li class="top"><a href="run-queries"><span>Run queries</span></a><ul><li><a href="run-queries#run"><span>.run(params?:object)</span></a></li><li><a href="run-queries#debug"><span>.debug(params?:object)</span></a></li><li><a href="run-queries#stream"><span>.stream(sink: Generator, params?:object)</span></a></li></ul></li><li class="top"><a href="services"><span>Services</span></a><ul><li><a href="services#create-a-service"><span>Create a service</span></a><ul><li class="leaf"><a href="services#service"><span>.service(keyOrDef)</span></a></li></ul></li><li><a href="services#service-builders"><span>Service builders</span></a><ul><li class="leaf"><a href="services#insert"><span>.insert(...args)</span></a></li><li class="leaf"><a href="services#update"><span>.update(prosMap)</span></a></li><li class="leaf"><a href="services#delete"><span>.delete()</span></a></li><li class="leaf"><a href="services#select"><span>.select(...args)</span></a></li></ul></li></ul><li><a href="services#create-relations"><span>Create Relations</span></a><ul><li class="leaf"><a href="services#one-to-one"><span>One to one</span></a></li><li class="leaf"><a href="services#one-to-many"><span>One to many</span></a></li><li class="leaf"><a href="services#many-to-many"><span>Many to many</span></a></li></ul></li><li><a href="services#query-with-associations"><span>Queries with associations</span></a><ul><li class="leaf"><a href="services#include"><span>.include(...associations)</span></a></li></ul></li></li></ul></nav></div></header><main id="main"><h1 id="insert-builder">Insert Builder</h1><p>The insert builder allows you to create <a href="https://devdocs.io/postgresql~10/sql-insert">INSERT queries</a>, to insert new data in
your database.</p><article><h2 class="method" id="insert">.insert(map: objectOrPointer, ...othersPropertyNames: pointer[])</h2><p>The insert builder factory can be used with either an object or a list of property strings. You use it with a list of strings to define
the columns of you insert query. You'll need therefore to supply some values later with <a href="builders/insert/#values">values</a> method
</p><pre class="hljs"><code>sh
    .insert(<span class="hljs-string">'id'</span>, <span class="hljs-string">'first_name'</span>, <span class="hljs-string">'last_name'</span>)
    .into(<span class="hljs-string">'users'</span>)
    .values({<span class="hljs-attr">id</span>:<span class="hljs-number">42</span>, <span class="hljs-attr">first_name</span>:<span class="hljs-string">'Laurent'</span>, <span class="hljs-attr">last_name</span>:<span class="hljs-string">'Renard'</span>})
    .build();

<span class="hljs-comment">// &gt; { text: 'INSERT INTO "users" ( "id", "first_name", "last_name" ) VALUES</span>
<span class="hljs-comment">//            ( 42, 'Laurent', 'Renard' )',</span>
<span class="hljs-comment">//   values: [] }</span>
</code></pre><p>The version with an object map is simply equivalent to a call with a list of strings whose values are the keys of the object and then
a call to <a href="builders/insert/#values">values</a> with the object values as query values. It will likely be more convenient if you wish to insert a single row.
</p><pre class="hljs"><code>sh
    .insert({<span class="hljs-attr">id</span>: <span class="hljs-number">42</span>, <span class="hljs-attr">first_name</span>: <span class="hljs-string">'Laurent'</span>, <span class="hljs-attr">last_name</span>: <span class="hljs-string">'Renard'</span>})
    .into(<span class="hljs-string">'users'</span>)
    .build();

<span class="hljs-comment">// is equivalent to</span>

sh
    .insert(<span class="hljs-string">'id'</span>, <span class="hljs-string">'first_name'</span>, <span class="hljs-string">'last_name'</span>)
    .into(<span class="hljs-string">'users'</span>)
    .values({<span class="hljs-attr">id</span>: <span class="hljs-number">42</span>, <span class="hljs-attr">first_name</span>: <span class="hljs-string">'Laurent'</span>, <span class="hljs-attr">last_name</span>: <span class="hljs-string">'Renard'</span>})
    .build();

<span class="hljs-comment">// &gt; { text: 'INSERT INTO "users" ( "id", "first_name", "last_name" )</span>
<span class="hljs-comment">//            VALUES ( 42, 'Laurent', 'Renard' )',</span>
<span class="hljs-comment">//      values: [] }</span>

</code></pre></article><article><h2 class="method" id="into">.into(tableName: string)</h2><p>Specify the table you wish to insert rows into.</p></article><article><h2 class="method" id="values">.values(rows:T | T[])</h2><p>You have already seen the version where you pass a an object as argument, but you can also pass an array of objects if you wish to perform
a <em>bulk insert</em>.
</p><pre class="hljs"><code>sh
    .insert(<span class="hljs-string">'id'</span>, <span class="hljs-string">'first_name'</span>, <span class="hljs-string">'last_name'</span>)
    .values([
        {<span class="hljs-attr">first_name</span>: <span class="hljs-string">'Laurent'</span>, <span class="hljs-attr">last_name</span>: <span class="hljs-string">'Renard'</span>},
        {<span class="hljs-attr">first_name</span>: <span class="hljs-string">'Charlie'</span>, <span class="hljs-attr">last_name</span>: <span class="hljs-string">'Renard'</span>}
    ])
    .into(<span class="hljs-string">'users'</span>)
    .build();

<span class="hljs-comment">// &gt; { text:</span>
<span class="hljs-comment">//    `INSERT INTO "users" ( "id", "first_name", "last_name" ) VALUES</span>
<span class="hljs-comment">//      ( DEFAULT, 'Laurent', 'Renard' ),</span>
<span class="hljs-comment">//      ( DEFAULT, 'Charlie', 'Renard' )`,</span>
<span class="hljs-comment">//   values: [] }</span>
</code></pre><p class="tip">If the object you pass misses some key/value pairs defined in the insert factory the <code>DEFAULT</code> keyword will be used instead.
</p></article><article><h2 class="method" id="returning">.returning(...properties: pointers[])</h2><p>Specify a returning close to your insert query. It is useful if you want to get back the freshly inserted rows
</p><pre class="hljs"><code>sh.insert(<span class="hljs-string">'id'</span>, <span class="hljs-string">'first_name'</span>, <span class="hljs-string">'last_name'</span>)
    .values([
        {<span class="hljs-attr">first_name</span>: <span class="hljs-string">'Laurent'</span>, <span class="hljs-attr">last_name</span>: <span class="hljs-string">'Renard'</span>},
        {<span class="hljs-attr">first_name</span>: <span class="hljs-string">'Charlie'</span>, <span class="hljs-attr">last_name</span>: <span class="hljs-string">'Renard'</span>}
    ])
    .into(<span class="hljs-string">'users'</span>)
    .returning(<span class="hljs-string">'id'</span>,<span class="hljs-string">'first_name'</span>)
    .build();

<span class="hljs-comment">//&gt; { text:</span>
<span class="hljs-comment">//    `INSERT INTO "users" ( "id", "first_name", "last_name" ) VALUES</span>
<span class="hljs-comment">//          ( DEFAULT, 'Laurent', 'Renard' ),</span>
<span class="hljs-comment">//          ( DEFAULT, 'Charlie', 'Renard' )</span>
<span class="hljs-comment">//     RETURNING "id", "first_name"`,</span>
<span class="hljs-comment">//    values: [] }</span>
</code></pre><p class="tip">You can use the <code>'*'</code> character if you wish to return all the columns the inserted rows.</p></article></main></body></html>